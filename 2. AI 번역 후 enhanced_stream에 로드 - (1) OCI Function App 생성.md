# 2. AI 번역 후 enhanced_stream에 로드 - (1) OCI Function App 생성

Function Application 안에서 FN을 만들 수 있으므로 FN을 만들기 전에 function app을 생성해야 합니다. FN app은 FN을 위한 리소스를 할당하고 FN의 configuration 정보를 저장하는 역할을 합니다. 




OCI 콘솔에서 Developer Services > Functions > Application 메뉴로 들어갑니다. 

![2-1](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/d08c6315-95d0-4790-a866-c55ad372d170)


Create Application을 클릭한 후 Name=  dpws1_pipeline_app, Shape= Generic_X86을 선택한 후 Create를 누르면 FN app이 생성됩니다.

![2-2](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/889651b6-3f71-4c17-82c0-d5d76c9c6d80)

FN app의 세부 페이지는 다음과 같습니다. 
Shape는 app 내에서 FN을 deploy, run하는 컴퓨트 인스턴스의 processor shape을 의미하며 ARM, X86, X86_ARM based architecture를 선택할 수 있고 FN은 각각 아키텍처에 적합한 dependency를 가져야 합니다.  

![2-3](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/cbd6f8a1-d9a3-4a17-a0a5-e529cbd0282e)



좌측 Log에 가서 log를 활성화합니다. (Name=dpws1_pipeline_app_invoke) 

![2-4](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/c409b1a1-dbf7-4c70-b304-3a5776e29ab2)

![2-4-1](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/761153ea-8337-45d6-af4d-d26981446691)


App 생성 후에는 container registry를 생성합니다. Function의 작동 방식은 FN을 호출하면 특정 Docker registry에 들어있는 Docker image를 pull 하고, Docker container 상태로 run 할 때 function이 수행되는 것입니다. 
OCI 콘솔에서 Developer Services > Containers > Container registry로 들어갑니다. 


<img src="https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/66622ee0-1c5b-48a1-bfc9-1ab42799be0b" height="350px"></p>


세부 페이지에 들어가서 Create repository를 누르고 name = dpws1/enhancing_fn_<이름> 을 입력한 후에 Create을 누릅니다. (private / public 임의로 선택)


![2-6](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/8750b820-3320-460e-b8e6-1ba96a3faf2e)



세부 페이지에 들어가서 Create repositor를 누르고 name = dpws1/triggering_fn_<이름> 을 입력한 후에 Create을 누릅니다. (private / public 임의로 선택)


![2-7](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/c0249fa5-64bf-4fb6-a602-08af5fa28485)






