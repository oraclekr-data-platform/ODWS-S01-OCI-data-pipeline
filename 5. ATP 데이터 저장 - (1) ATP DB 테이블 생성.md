
# 5. ATP 데이터 저장 - (1) ATP DB 테이블 생성

OCI 콘솔에서 Oracle Database > Autonomous Data Warehouse 메뉴로 들어갑니다. 

![5-1](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/f7ca8bf1-bca2-48f3-b210-8d555b9e7047)


Create Autonomous Database를 클릭해서 DB 생성을 시작합니다.

![5-2](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/f60de8b4-2a86-45db-80ea-f44b91c5e429)



DB name = <mail_id>SourceATP 및 Transaction Processing, Serverless 유형을 선택합니다. 


![5-3](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/52bd8ff5-7b4d-4b79-a6c8-86a1b0ef3087)

DB version = 19c, ECPU=2 등을 입력합니다. 

![5-4](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/42afd2a6-a89a-4b1f-835d-750b25062d11)


Username, password를 입력하고 secure access from everywhere, license included를 선택합니다. 
     Create Autonomous Database를 클릭하면 ATP DB가 생성됩니다. 

![5-5](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/425b38ef-4a9a-44d7-81a4-16c7098aa23e)


![5-5-1](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/fece7f8d-9eae-4438-8668-5528bd427d81)


ATP 세부 페이지에서 Database actions에서 SQL를 선택합니다.

<img src="https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/50a413a1-e643-4d08-961d-bc019f4a3cc8)" height="550px"></p>



code editor의 Step05 의 README  파일에서 table 생성을 위한 SQL을 복사 후 SQL 에디터에서 실행합니다.  


![5-7](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/be637c9b-5a27-402e-ba49-af8d495d4903)



![5-7-1](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/1a3a3ef3-4b8e-4591-be52-77d0d34a28f8)

## https://github.com/taewanme/oci-dp-workshop-2023.06/blob/main/track_01/step05/README.md

SQL 에디터에서 credential을 생성합니다. 

![5-8](https://github.com/oraclekr-data-platform/ODWS-S01-OCI-data-pipeline/assets/150219167/7102b1b9-1260-4de7-bb49-0c2c512aa44f)

** username = 'oracleidentitycloudservice/<mail_id>'  (Default 도메인 user인 경우에는 <mail_id>를 사용하며, Oracle IDCS -identity cloud service(IDCS) 도메인 user로 로그인한 경우에는 앞에 <mail_id>앞에 oracleidentitycloudservice를 붙여줌) 

